{{- $thumbName := "thumb" }}

{{- $src := .Get "src" }}
{{- $alt := .Get "alt" }}
{{- $caption := .Get "caption" }}
{{- $srcdir := path.Dir $src}}
{{- $imageName := path.BaseName $src}}
{{- $imageExt := path.Ext $src}}
{{- $imageThumb := delimit (slice $imageName "-thumb." $imageExt) ""}}

<a href="{{ $src }}">
    <img
        src="{{ path.Join $srcdir $thumbName ( path.Base $src) }}"
        alt="{{ $alt }}" />
</a>